{% extends "base.html" %}
{% block title %}Monthly View{% endblock %}
{% block primary %}
<h3>Monthly View</h3>

<p>Switch to
  <a href="{% url month-agenda calendar.slug month.year month.abbr %}">
    agenda view
  </a>.
</p>

{% if not small %}
<h4>
  <a href="{% url month-calendar calendar.slug month.previous.year month.previous.abbr %}"
    title="Previous Month">&larr;</a>
  <a title="View {{ month.name}}" href="{% url month-calendar calendar.slug month.year month.abbr %}">
    {{ month|date:"F" }}</a>
  <a title="View {{ month.year}}" href="{% url year-calendar calendar.slug month.year %}">
    {{ month|date:"Y" }}</a>
  <a href="{% url month-calendar calendar.slug month.next.year month.next.abbr %}"
    title="Next Month">&rarr;</a>
</h4>
{% else %}
<h4>
  <a href="{% url small-month-calendar calendar.slug month.previous.year month.previous.abbr %}"
    title="Previous Month">&larr;</a>
  <a title="View {{ month.name}}" href="{% url small-month-calendar calendar.slug month.year month.abbr %}">
    {{ month|date:"F" }}</a>
  <a title="View {{ month.year}}" href="{% url year-calendar calendar.slug month.year %}">
    {{ month|date:"Y" }}</a>
  <a href="{% url small-month-calendar calendar.slug month.next.year month.next.abbr %}"
    title="Next Month">&rarr;</a>
</h4>
{% endif %}

<table class="month-view{% if small %} small{% endif %}">
  <thead>
    <tr>
      {% for dayname in month.day_names %}
      <th>{{ dayname }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in month.calendar_display %}
      <tr>
        {% for day in row  %}
        <td{% if day == today %} class="today"{% endif %}>
          {% if day %}
          <div class="day-ordinal">
            <a href="{% url day-calendar calendar.slug day.year month.abbr day.number %}">{{ day.number }}</a>
          </div>
          {% if day.occurrences %}
          <ul>
            {% for occurrence in day.occurrences %}
            <li>
              <a class="{% if occurrence.is_cancelled %}cancelled{% endif %}"
                 href="{{ occurrence.get_absolute_url }}">
                 {{ occurrence.event.name }}
               </a>
            <span class="event_times">{{ occurrence.start|time }}</span>
            </li>
            {% endfor %}
          </ul>
          {% endif %}
          {% endif %}
        </td>
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

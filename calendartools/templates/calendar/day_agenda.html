{% extends "base.html" %}
{% load math %}

{% block title %}Day Agenda{% endblock %}
{% block primary %}
<h3>Day Agenda</h3>

<p>Switch to
  <a href="{% url day-calendar calendar.slug day.year day.get_month.abbr day.number %}">
    calendar view
  </a>.
</p>

<h4>
  <a href="{% url day-agenda calendar.slug day.previous.year day.previous.get_month.abbr day.previous.number %}"
    title="Previous Day">&larr;</a>
  <a title="View {{ day|date:"l, jS F, Y"}}" href="{% url day-agenda calendar.slug day.year day.get_month.abbr day.number %}">
    {{ day|date:"l jS" }}</a>
  <a title="View {{ day|date:"F, Y"}}" href="{% url month-agenda calendar.slug day.year day.get_month.abbr %}">
    {{ day|date:"F" }}</a>
  <a title="View {{ day.year}}" href="{% url year-agenda calendar.slug day.year %}">
    {{ day|date:"Y" }}</a>
  <a href="{% url day-agenda calendar.slug day.next.year day.next.get_month.abbr day.next.number %}"
    title="Next Day">&rarr;</a>
</h4>

{% if not day.occurrences %}
  <p>No events occurring in {{ day }}</p>
{% else %}
<table class="day-agenda">
  <thead>
    <tr>
      <th>Title</th>
      <th>Start</th>
      <th>End</th>
    </tr>
  </thead>
  <tbody>
    {% for o in day.occurrences %}
      <tr class="hour-divider">
        <td><a class="{{ o.status_slug }}"
               href="{{ o.get_absolute_url }}">{{ o.name }}</a></td>
        <td>{{ o.start|date:"P" }}</td>
        <td>{{ o.finish|date:"P" }}</td>
      </tr>
        {% if not forloop.last %}
      <tr>
          {% endif %}
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% endblock %}
